properties:
  - name: filename
    constructor_arg: true
functions:
  - name: last_write_time
    type: std::time_t
    body: |
      auto ftime = std::filesystem::last_write_time(filename);
      #ifdef _WIN32
        return ftime; // will fail to compile
      #else
        std::time_t last_write_time = decltype(ftime)::clock::to_time_t(ftime);
        return last_write_time;
      #endif
    body_dependency_symbols:
      - std::filesystem::last_write_time
      - decltype(T)::clock::to_time_t(T)
dependencies:
  - symbol: std::filesystem::last_write_time
    headers: [ 'filesystem' ]
  - symbol: decltype(T)::clock::to_time_t(T)
    headers: [ 'ctime' ]
  - symbol: std::time_t
    headers: [ 'ctime' ]
